<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û–ü–¢–ò–ö–ê –°–û–ù–ê–¢–ê - –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</title>
    <link rel="stylesheet" href="styles.css">
    <!-- PDF and Canvas libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <img src="logo.png" alt="–û–ü–¢–ò–ö–ê –°–û–ù–ê–¢–ê" class="header-logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                <div class="logo-fallback-header" style="display: none;">
                    <div class="eye-icon">üëÅÔ∏è</div>
                    <div class="brand-name">
                        <div class="optics">–û–ü–¢–ò–ö–ê</div>
                        <div class="sonata">–°–û–ù–ê–¢–ê</div>
                    </div>
                </div>
            </div>
            <nav class="main-nav">
                <button class="nav-btn active" data-section="dashboard">üìä –ü–∞–Ω–µ–ª—å</button>
                <button class="nav-btn" data-section="orders">üìã –ó–∞–∫–∞–∑—ã</button>
                <button class="nav-btn" data-section="clients">üë• –ö–ª–∏–µ–Ω—Ç—ã</button>
                <button class="nav-btn" data-section="inventory">üì¶ –°–∫–ª–∞–¥</button>
                <button class="nav-btn" data-section="finance">üí∞ –§–∏–Ω–∞–Ω—Å—ã</button>
            </nav>
            <div class="user-info">
                <span class="date" id="current-date"></span>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Section -->
            <section id="dashboard" class="section active">
                <h2>–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>–ù–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã</h3>
                        <div class="stat-number" id="new-orders">0</div>
                        <button class="stat-btn" onclick="showSection('orders')">–ü—Ä–æ—Å–º–æ—Ç—Ä</button>
                    </div>
                    <div class="stat-card">
                        <h3>–í —Ä–∞–±–æ—Ç–µ</h3>
                        <div class="stat-number" id="in-progress">0</div>
                        <button class="stat-btn" onclick="showSection('orders')">–ü—Ä–æ—Å–º–æ—Ç—Ä</button>
                    </div>
                    <div class="stat-card">
                        <h3>–ì–æ—Ç–æ–≤—ã–µ</h3>
                        <div class="stat-number" id="ready">0</div>
                        <button class="stat-btn" onclick="showSection('orders')">–ü—Ä–æ—Å–º–æ—Ç—Ä</button>
                    </div>
                    <div class="stat-card">
                        <h3>–í—ã—Ä—É—á–∫–∞ –∑–∞ –¥–µ–Ω—å</h3>
                        <div class="stat-number" id="daily-revenue">0 KZT</div>
                        <button class="stat-btn" onclick="showSection('finance')">–î–µ—Ç–∞–ª–∏</button>
                    </div>
                </div>
                <div class="quick-actions">
                    <button class="action-btn" onclick="showSection('orders')">üìù –ù–æ–≤—ã–π –∑–∞–∫–∞–∑</button>
                    <button class="action-btn" onclick="showSection('clients')">üë§ –î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞</button>
                    <button class="action-btn" onclick="showSection('inventory')">üì¶ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∫–ª–∞–¥</button>
                </div>
            </section>

            <!-- Orders Section -->
            <section id="orders" class="section">
                <div class="section-header">
                    <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏</h2>
                    <button class="primary-btn" onclick="showNewOrderForm()">üìù –ù–æ–≤—ã–π –∑–∞–∫–∞–∑</button>
                </div>
                <div id="orders-list" class="orders-list">
                    <!-- Orders will be loaded here -->
                </div>
            </section>

            <!-- New Order Form -->
            <section id="new-order" class="section">
                <div class="section-header">
                    <h2>–ù–æ–≤—ã–π –∑–∞–∫–∞–∑</h2>
                    <button class="secondary-btn" onclick="showSection('orders')">‚Üê –ù–∞–∑–∞–¥</button>
                </div>
                <form id="order-form" class="order-form">
                    <!-- Header with Logo -->
                    <div class="form-header">
                        <div class="form-left">
                            <div class="form-group">
                                <label>–ó–∞–∫–∞–∑ ‚Ññ</label>
                                <input type="text" id="order-number" readonly>
                            </div>
                            <div class="form-group">
                                <label>–§–ò–û</label>
                                <input type="text" id="client-name" required>
                            </div>
                            <div class="form-group">
                                <label>–¢–µ–ª.</label>
                                <input type="tel" id="client-phone" required>
                            </div>

                        </div>
                        <div class="form-logo">
                            <div class="logo-container">
                                <img src="logo.png" alt="–û–ü–¢–ò–ö–ê –°–û–ù–ê–¢–ê" class="logo-image" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                                <div class="logo-fallback" style="display: none;">
                                    <div class="eye-icon">üëÅÔ∏è</div>
                                    <div class="brand-name">
                                        <div class="optics">–û–ü–¢–ò–ö–ê</div>
                                        <div class="sonata">–°–û–ù–ê–¢–ê</div>
                                    </div>
                                    <div class="contact-info">
                                        <div>–ê—Å—Ç–∞–Ω–∞, –°—ã–≥–∞–Ω–∞–∫ 32</div>
                                        <div>WhatsApp: +77007430770</div>
                                        <div>Instagram: sonata.astana</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Order Timing -->
                    <div class="timing-section">
                        <h3>–°—Ä–æ–∫ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∑–∞–∫–∞–∑–∞:</h3>
                        <div class="timing-grid">
                            <div class="form-group">
                                <label>–ü—Ä–∏–Ω—è—Ç</label>
                                <input type="date" id="accept-date" required>
                            </div>
                            <div class="form-group">
                                <label>–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å</label>
                                <input type="date" id="ready-date" required>
                            </div>
                        </div>
                    </div>

                    <!-- Prescription Section -->
                    <div class="prescription-section">
                        <h3>–†–µ—Ü–µ–ø—Ç</h3>
                        <table class="prescription-table">
                            <thead>
                                <tr>
                                    <th></th>
                                    <th>Sph</th>
                                    <th>Cyl</th>
                                    <th>Ax</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>OD</td>
                                    <td><input type="number" step="0.25" id="od-sph"></td>
                                    <td><input type="number" step="0.25" id="od-cyl"></td>
                                    <td><input type="number" id="od-ax" min="0" max="180"></td>
                                </tr>
                                <tr>
                                    <td>OS</td>
                                    <td><input type="number" step="0.25" id="os-sph"></td>
                                    <td><input type="number" step="0.25" id="os-cyl"></td>
                                    <td><input type="number" id="os-ax" min="0" max="180"></td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="pd-input">
                            <label>Pd</label>
                            <input type="number" id="pd" step="0.5" placeholder="–º–º">
                        </div>
                    </div>

                    <!-- Items and Costs -->
                    <div class="items-section">
                        <h3>–¢–æ–≤–∞—Ä—ã –∏ —É—Å–ª—É–≥–∏</h3>
                        <div class="items-table">
                            <div class="items-header">
                                <div class="item-name-header">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</div>
                                <div class="item-quantity-header">–ö–æ–ª-–≤–æ</div>
                                <div class="item-price-header">–¶–µ–Ω–∞ –∑–∞ –µ–¥.</div>
                                <div class="item-discount-header">–°–∫–∏–¥–∫–∞ %</div>
                                <div class="item-total-header">–°—É–º–º–∞</div>
                                <div class="item-actions-header">–î–µ–π—Å—Ç–≤–∏—è</div>
                            </div>
                            <div id="items-list">
                                <div class="item-row">
                                    <input type="text" placeholder="–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ" class="item-name">
                                    <input type="number" placeholder="1" class="item-quantity" min="1" value="1">
                                    <input type="number" placeholder="–¶–µ–Ω–∞" class="item-price" step="0.01">
                                    <input type="number" placeholder="0" class="item-discount" min="0" max="100" value="0">
                                    <input type="number" placeholder="0" class="item-total" readonly>
                                    <button type="button" class="remove-item" onclick="removeItem(this)">‚úï</button>
                                </div>
                            </div>
                        </div>
                        <button type="button" class="add-item-btn" onclick="addItem()">+ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é</button>
                    </div>

                    <!-- Financial Summary -->
                    <div class="financial-summary">
                        <div class="summary-grid">
                            <div class="summary-item">
                                <label>–ò—Ç–æ–≥–æ</label>
                                <input type="number" id="total-amount" readonly>
                            </div>
                            <div class="summary-item">
                                <label>–û–ø–ª–∞—á–µ–Ω–æ</label>
                                <input type="number" id="paid-amount" placeholder="0">
                            </div>
                            <div class="summary-item">
                                <label>–î–æ–ª–≥</label>
                                <input type="number" id="debt-amount" readonly>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="primary-btn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–∫–∞–∑</button>
                        <button type="button" class="secondary-btn" onclick="generatePDF()">üìÑ –≠–∫—Å–ø–æ—Ä—Ç PDF</button>
                        <button type="button" class="secondary-btn" onclick="generateJPEG()">üñºÔ∏è –≠–∫—Å–ø–æ—Ä—Ç JPEG</button>
                        <button type="button" class="whatsapp-btn" onclick="sendWhatsApp()">üì± –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ WhatsApp</button>
                    </div>
                </form>
            </section>

            <!-- Clients Section -->
            <section id="clients" class="section">
                <div class="section-header">
                    <h2>–ë–∞–∑–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤</h2>
                    <button class="primary-btn" onclick="showAddClientForm()">üë§ –î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞</button>
                </div>
                <div class="search-bar">
                    <input type="text" id="client-search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏, —Ç–µ–ª–µ—Ñ–æ–Ω—É...">
                </div>
                <div id="clients-list" class="clients-list">
                    <!-- Clients will be loaded here -->
                </div>
            </section>

            <!-- Inventory Section -->
            <section id="inventory" class="section">
                <div class="section-header">
                    <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∫–ª–∞–¥–æ–º</h2>
                    <button class="primary-btn" onclick="showAddItemForm()">üì¶ –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
                </div>
                <div class="inventory-tabs">
                    <button class="tab-btn active" data-category="frames">üï∂Ô∏è –û–ø—Ä–∞–≤—ã</button>
                    <button class="tab-btn" data-category="lenses">üëÅÔ∏è –õ–∏–Ω–∑—ã</button>
                    <button class="tab-btn" data-category="accessories">üîß –ê–∫—Å–µ—Å—Å—É–∞—Ä—ã</button>
                </div>
                <div id="inventory-list" class="inventory-list">
                    <!-- Inventory items will be loaded here -->
                </div>
            </section>

            <!-- Finance Section -->
            <section id="finance" class="section">
                <div class="section-header">
                    <h2>–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –æ—Ç—á–µ—Ç</h2>
                    <button class="primary-btn" onclick="generateFinancialReport()">üìä –°–æ–∑–¥–∞—Ç—å –æ—Ç—á–µ—Ç</button>
                </div>
                <div class="finance-overview">
                    <div class="finance-card">
                        <h3>–í—ã—Ä—É—á–∫–∞ –∑–∞ –º–µ—Å—è—Ü</h3>
                        <div class="finance-number" id="monthly-revenue">0 KZT</div>
                    </div>
                    <div class="finance-card">
                        <h3>–ü—Ä–∏–±—ã–ª—å</h3>
                        <div class="finance-number" id="monthly-profit">0 KZT</div>
                    </div>
                    <div class="finance-card">
                        <h3>–ó–∞–∫–∞–∑–æ–≤</h3>
                        <div class="finance-number" id="monthly-orders">0</div>
                    </div>
                </div>
                <div id="finance-details" class="finance-details">
                    <!-- Financial details will be loaded here -->
                </div>
            </section>
        </main>
    </div>

    <!-- Load the main application JavaScript -->
    <script src="app.js"></script>
</body>
</html>
